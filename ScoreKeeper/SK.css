/* scorekeeper.css */
:root{
  --bg:#f6f8fb;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --line:#e5e7eb;
  --accent:#2563eb;
  --accent2:#8a3af9;
  --good:#16a34a;
  --warn:#b45309;
  --bad:#dc2626;
  --shadow:0 10px 30px rgba(2,6,23,.08);
  --radius:16px;

  --w: clamp(320px, 96vw, 1180px);
  --pad: clamp(14px, 1.8vw, 20px);
  --fs: clamp(15px, 0.7vw + 14px, 16px);
  --fs-sm: clamp(13px, 0.6vw + 12px, 14px);
  --fs-lg: clamp(18px, 1vw + 16px, 22px);
  --fs-xl: clamp(22px, 2vw + 18px, 32px);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  font-size: var(--fs);
  background: radial-gradient(900px 500px at 15% 0%, rgba(37,99,235,.10), transparent 60%),
              radial-gradient(800px 480px at 95% 10%, rgba(96,165,250,.12), transparent 60%),
              var(--bg);
  color:var(--text);
  line-height:1.35;
}

.wrap{
  width: var(--w);
  margin: 0 auto;
  padding: calc(var(--pad) + env(safe-area-inset-top)) var(--pad) calc(var(--pad) + env(safe-area-inset-bottom));
}

header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
  margin: 8px 0 16px;
}
.title{
  display:flex;
  flex-direction:column;
  gap:4px;
}
h1{
  margin:0;
  font-size: var(--fs-xl);
  letter-spacing:-.02em;
}
.brand-title{
  display: inline-flex;
  align-items: center;
  gap: 10px;
}
.brand-icon{
  width: clamp(28px, 2.3vw + 18px, 40px);
  height: clamp(28px, 2.3vw + 18px, 40px);
  object-fit: contain;
  border-radius: 8px;
}
.sub{
  color: var(--muted);
  font-size: var(--fs-sm);
}

.top-actions{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  flex-wrap:wrap;
  gap:10px;
}

.grid{
  display:grid;
  grid-template-columns: 1fr;
  gap: 14px;
}

@media (min-width: 860px){
  .grid{
    grid-template-columns: 430px minmax(0, 1fr);
    align-items:start;
  }
}

.card{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: var(--pad);
}

.card h2{
  margin:0 0 10px;
  font-size: var(--fs-lg);
  letter-spacing:-.01em;
}

.row{
  display:flex;
  gap: 10px;
  flex-wrap:wrap;
  align-items:center;
}

.field{
  display:flex;
  flex-direction:column;
  gap:6px;
  min-width: 160px;
  flex: 1 1 160px;
}

label{
  font-size: var(--fs-sm);
  color: var(--muted);
}

input[type="text"], input[type="number"], select{
  width:100%;
  padding: 11px 12px;
  border: 1px solid var(--line);
  border-radius: 12px;
  outline: none;
  background: #fff;
  color: var(--text);
  font-size: var(--fs);
}
input[type="text"]:focus, input[type="number"]:focus, select:focus{
  border-color: rgba(37,99,235,.5);
  box-shadow: 0 0 0 4px rgba(37,99,235,.12);
  outline:none;
}

.btn{
  appearance:none;
  border: 1px solid var(--line);
  background: #fff;
  color: var(--text);
  border-radius: 999px;
  padding: 10px 14px;
  font-size: var(--fs-sm);
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  user-select:none;
  transition: transform .03s ease, border-color .15s ease, box-shadow .15s ease;
}
.btn:hover{
  border-color: rgba(37,99,235,.35);
  box-shadow: 0 6px 18px rgba(2,6,23,.06);
}
.btn:active{ transform: translateY(1px); }
.btn:disabled{
  opacity: .5;
  cursor:not-allowed;
  box-shadow:none;
}
.btn.primary{
  background: linear-gradient(180deg, rgba(37,99,235,.98), rgba(37,99,235,.88));
  border-color: rgba(37,99,235,.9);
  color: #fff;
}
.btn.danger{
  border-color: rgba(220,38,38,.35);
  color: var(--bad);
  background:#fff;
}

.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: #fff;
  color: var(--muted);
  font-size: var(--fs-sm);
  white-space:nowrap;
}
.pill strong{
  color: var(--text);
  font-weight: 700;
}

.hr{
  height:1px;
  background: var(--line);
  margin: 12px 0;
}

.muted{ color: var(--muted); font-size: var(--fs-sm); }

.scoreboard-head{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
  margin-bottom: 10px;
}
#scoreboardCard{
  position: relative;
  isolation: isolate;
  overflow: hidden;
}
#scoreboardCard.has-bg{
  background: rgba(var(--scoreboard-tint-rgb, 255, 255, 255), .14);
  border-color: rgba(var(--scoreboard-tint-rgb, 229, 231, 235), .45);
}
.scoreboard-bg-image{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
  object-position: top center;
  opacity: .35;
  z-index: 0;
  pointer-events: none;
}
.scoreboard-bg-image[hidden]{
  display: none !important;
}
#scoreboardCard > :not(.scoreboard-bg-image){
  position: relative;
  z-index: 1;
}
#scoreboardCard.has-bg table{
  background: rgba(var(--scoreboard-tint-rgb, 255, 255, 255), .18);
  border-color: rgba(var(--scoreboard-tint-rgb, 229, 231, 235), .40);
}
#scoreboardCard.has-bg th{
  background: rgba(var(--scoreboard-tint-rgb, 248, 250, 252), .26);
}
#scoreboardCard.has-bg details,
#scoreboardCard.has-bg .history-wrap,
#scoreboardCard.has-bg .history-graph-wrap,
#scoreboardCard.has-bg .phase10-ref{
  background: rgba(var(--scoreboard-tint-rgb, 255, 255, 255), .20);
  border-color: rgba(var(--scoreboard-tint-rgb, 229, 231, 235), .40);
}
#scoreboardCard.hearts-mode.has-bg table{
  background: rgba(69,10,10,.30);
  border-color: rgba(248,113,113,.45);
}
#scoreboardCard.hearts-mode.has-bg th{
  background: rgba(127,29,29,.88);
  color: #f8fafc;
  border-bottom-color: rgba(254,202,202,.38);
  text-shadow: 0 1px 0 rgba(0,0,0,.2);
}
#scoreboardCard.hearts-mode.has-bg details,
#scoreboardCard.hearts-mode.has-bg .history-wrap,
#scoreboardCard.hearts-mode.has-bg .history-graph-wrap,
#scoreboardCard.hearts-mode.has-bg .phase10-ref{
  background: rgba(69,10,10,.10);
  border-color: rgba(248,113,113,.45);
}
#scoreboardCard.hearts-mode #scoreboardTitle,
#scoreboardCard.hearts-mode #scoreboardEmpty,
#scoreboardCard.hearts-mode #historySummaryText,
#scoreboardCard.hearts-mode summary,
#scoreboardCard.hearts-mode th,
#scoreboardCard.hearts-mode td,
#scoreboardCard.hearts-mode .history-round-card,
#scoreboardCard.hearts-mode .history-round-card-name,
#scoreboardCard.hearts-mode .history-round-card-head,
#scoreboardCard.hearts-mode td .name,
#scoreboardCard.hearts-mode td .sub,
#scoreboardCard.hearts-mode .phase10-ref,
#scoreboardCard.hearts-mode .phase10-ref h3,
#scoreboardCard.hearts-mode .phase10-ref ol,
#scoreboardCard.hearts-mode .phase10-ref li,
#scoreboardCard.hearts-mode .phase10-ref strong,
#scoreboardCard.hearts-mode .history-graph-legend-item,
#scoreboardCard.hearts-mode .history-graph-label,
#scoreboardCard.hearts-mode .history-stats-table th,
#scoreboardCard.hearts-mode .history-stats-table td{
  color: #f8fafc !important;
}
#scoreboardCard.hearts-mode .history-stats-wrap{
  border-color: rgba(248,113,113,.45);
}
#scoreboardCard.hearts-mode .history-stats-table th{
  background: rgba(127,29,29,.88);
  border-bottom-color: rgba(254,202,202,.38);
}
#scoreboardCard.hearts-mode .history-stats-table td{
  background: rgba(69,10,10,.08);
  border-bottom-color: rgba(248,113,113,.34);
}
#scoreboardCard.hearts-mode .history-graph-axis{
  stroke: rgba(254,202,202,.7);
}
#scoreboardCard.hearts-mode .history-graph-grid{
  stroke: rgba(254,202,202,.25);
}
#scoreboardCard.hearts-mode .history-graph-point{
  stroke: rgba(127,29,29,.9);
}
#scoreboardCard.hearts-mode .history-table td{
  background: rgba(69,10,10,.08);
  border-bottom-color: rgba(248,113,113,.34);
}
#scoreboardCard.hearts-mode .history-action-btn{
  background: rgba(127,29,29,.38);
  color: #f8fafc;
  border-color: rgba(248,113,113,.55);
}
#scoreboardCard.hearts-mode .history-action-btn.danger{
  color: #fee2e2;
  border-color: rgba(254,202,202,.64);
}
#scoreboardCard.hearts-mode .history-edit-input{
  background: rgba(127,29,29,.45);
  color: #f8fafc;
  border-color: rgba(248,113,113,.55);
}

table{
  width:100%;
  border-collapse: collapse;
  overflow:hidden;
  border-radius: 12px;
  border: 1px solid var(--line);
  background:#fff;
}
th, td{
  padding: 10px 10px;
  border-bottom: 1px solid var(--line);
  text-align:left;
  vertical-align:middle;
  font-size: var(--fs-sm);
}
th{
  background: #f8fafc;
  color: var(--muted);
  font-weight: 650;
}
tr:last-child td{ border-bottom:none; }

.name{
  font-weight:700;
  font-size: var(--fs);
}
.total{
  font-weight:800;
  font-size: var(--fs-lg);
  letter-spacing:-.01em;
}
.leader{
  outline: 3px solid rgba(37,99,235,.14);
  outline-offset: -3px;
  background: rgba(37,99,235,.04);
}
.winner{
  outline: 3px solid rgba(22,163,74,.18);
  outline-offset: -3px;
  background: rgba(22,163,74,.06);
}

.banner{
  display:none;
  position: sticky;
  top: 10px;
  z-index: 5;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(202,138,4,.42);
  background: linear-gradient(180deg, rgba(245,158,11,.16), rgba(202,138,4,.08));
  box-shadow: var(--shadow);
  margin-bottom: 14px;
  transform-origin: top center;
  overflow: hidden;
  isolation: isolate;
}
.banner::before,
.banner::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:0;
}
.banner::before{
  background:
    linear-gradient(110deg,
      transparent 0%,
      rgba(255,255,255,.18) 38%,
      rgba(255,255,255,.34) 50%,
      rgba(255,255,255,.18) 62%,
      transparent 100%);
  transform: translateX(-130%);
}
.banner::after{
  background-image:
    radial-gradient(circle at 10% 30%, rgba(255,255,255,.75) 0 2px, transparent 3px),
    radial-gradient(circle at 24% 68%, rgba(255,215,0,.75) 0 2px, transparent 3px),
    radial-gradient(circle at 56% 24%, rgba(255,255,255,.7) 0 2px, transparent 3px),
    radial-gradient(circle at 72% 62%, rgba(147,197,253,.7) 0 2px, transparent 3px),
    radial-gradient(circle at 88% 34%, rgba(255,255,255,.7) 0 2px, transparent 3px);
  opacity: 0;
}
.banner.show{
  display:block;
  animation:
    winnerBannerIn .42s ease-out both,
    winnerBannerGlow 2.6s ease-in-out .2s infinite;
}
.banner.show::before{ animation: winnerShimmer 1.3s ease-out .08s 1; }
.banner.show::after{ animation: winnerSparkles 1.6s ease-in-out .12s 1; }
.banner .big{
  font-size: var(--fs-lg);
  font-weight: 850;
  letter-spacing: -.01em;
  position: relative;
  z-index: 1;
  text-shadow: 0 1px 0 rgba(255,255,255,.35), 0 6px 20px rgba(202,138,4,.24);
  animation:
    winnerTitlePop .48s cubic-bezier(.16,.86,.36,1.24) .08s both,
    winnerTitlePulse 1.8s ease-in-out .48s 1;
}
.banner .small{
  color: var(--muted);
  font-size: var(--fs-sm);
  margin-top: 2px;
  position: relative;
  z-index: 1;
}
.banner .actions{
  margin-top: 10px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  position: relative;
  z-index: 1;
}

@keyframes winnerBannerIn{
  0%{
    opacity: 0;
    transform: translateY(-8px) scale(.985);
  }
  100%{
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
@keyframes winnerTitlePulse{
  0%,100%{
    transform: scale(1);
  }
  35%{
    transform: scale(1.02);
  }
}
@keyframes winnerTitlePop{
  0%{
    opacity: .3;
    transform: translateY(8px) scale(.94);
  }
  100%{
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
@keyframes winnerShimmer{
  0%{ transform: translateX(-130%); }
  100%{ transform: translateX(130%); }
}
@keyframes winnerSparkles{
  0%{ opacity: 0; transform: scale(.9); }
  35%{ opacity: .9; transform: scale(1.03); }
  100%{ opacity: 0; transform: scale(1.08); }
}
@keyframes winnerBannerGlow{
  0%,100%{
    box-shadow: var(--shadow);
    border-color: rgba(202,138,4,.42);
  }
  50%{
    box-shadow: 0 14px 36px rgba(202,138,4,.28);
    border-color: rgba(202,138,4,.62);
  }
}
@media (prefers-reduced-motion: reduce){
  .banner.show{
    animation: none;
  }
  .banner .big{
    animation: none;
  }
  .banner.show::before,
  .banner.show::after{
    animation: none;
  }
}

details{
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 10px 12px;
  background:#fff;
}
summary{
  cursor:pointer;
  font-weight:700;
  color: var(--text);
  list-style:none;
}
summary::-webkit-details-marker{ display:none; }
.history-wrap{
  margin-top: 10px;
  overflow:auto;
  border-radius: 12px;
  border: 1px solid var(--line);
}
.history-cards{
  display: grid;
  gap: 8px;
}
.history-round-card{
  border: 1px solid var(--line);
  border-radius: 12px;
  background: rgba(255,255,255,.75);
  padding: 10px;
}
.history-round-card-head{
  font-weight: 700;
  margin-bottom: 8px;
}
.history-round-card-body{
  display: grid;
  gap: 6px;
}
.history-round-card-line{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}
.history-round-card-name{
  color: var(--muted);
  font-size: 12px;
}
.history-round-card-value{
  display: inline-flex;
  align-items: center;
  gap: 4px;
}
.history-card-score{
  display: inline-flex;
  align-items: center;
  gap: 4px;
  border-radius: 10px;
  padding: 2px 6px;
}
.history-round-card-actions{
  margin-top: 10px;
}
.history-graph-wrap{
  margin-top: 10px;
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 10px;
  background: rgba(255,255,255,.72);
}
.history-graph-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 8px;
  margin-bottom: 8px;
  font-size: var(--fs-sm);
}
.history-graph-scroll{
  overflow: hidden;
}
.history-graph{
  width: 100%;
  height: 230px;
  display: block;
}
.history-graph-axis{
  stroke: rgba(100,116,139,.8);
  stroke-width: 1.2;
}
.history-graph-grid{
  stroke: rgba(148,163,184,.35);
  stroke-width: 1;
}
.history-graph-label{
  fill: var(--muted);
  font-size: 11px;
  font-family: inherit;
}
.history-graph-line{
  fill: none;
  stroke-width: 2.5;
  stroke-linejoin: round;
  stroke-linecap: round;
}
.history-graph-point{
  stroke: rgba(15,23,42,.7);
  stroke-width: 1;
}
.history-graph-legend{
  margin-top: 10px;
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
}
.history-graph-legend-item{
  display:inline-flex;
  align-items:center;
  gap: 6px;
  border: 1px solid var(--line);
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 12px;
  color: var(--text);
  background: rgba(255,255,255,.7);
}
.history-graph-legend-swatch{
  width: 10px;
  height: 10px;
  border-radius: 999px;
}
.history-stats-wrap{
  margin-top: 10px;
  overflow: hidden;
  border: 1px solid var(--line);
  border-radius: 12px;
}
.history-stats-table{
  width: 100%;
  border-collapse: collapse;
  border: none;
  border-radius: 0;
}
.history-stats-table th,
.history-stats-table td{
  padding: 8px 10px;
  border-bottom: 1px solid var(--line);
  font-size: var(--fs-sm);
  white-space: nowrap;
}
.history-stats-table th{
  background: rgba(248,250,252,.9);
  color: var(--muted);
  font-weight: 700;
}
.history-stats-table tr:last-child td{
  border-bottom: none;
}

@media (max-width: 640px){
  .history-graph-wrap{
    padding: 8px;
  }
  .history-graph{
    height: 200px;
  }
  .history-graph-label{
    font-size: 10px;
  }
  .history-graph-legend{
    gap: 6px;
  }
  .history-graph-legend-item{
    font-size: 11px;
    padding: 2px 7px;
  }
  .history-stats-table th,
  .history-stats-table td{
    padding: 7px 8px;
    font-size: 12px;
  }
}
.history-table{
  min-width: 560px;
  border: none;
  border-radius: 0;
}
.history-table th, .history-table td{
  border-bottom: 1px solid var(--line);
  padding: 10px 10px;
  font-size: var(--fs-sm);
  white-space:nowrap;
}
#scoreboardCard.phase10-mode .history-table th{
  background: rgba(15,23,42,.78);
  color: #f8fafc;
  border-bottom-color: rgba(248,250,252,.28);
  text-shadow: 0 1px 0 rgba(0,0,0,.2);
}
#scoreboardCard.phase10-mode.has-bg table{
  background: rgba(15,23,42,.30);
  border-color: rgba(148,163,184,.45);
}
#scoreboardCard.phase10-mode.has-bg details,
#scoreboardCard.phase10-mode.has-bg .history-wrap,
#scoreboardCard.phase10-mode.has-bg .history-graph-wrap,
#scoreboardCard.phase10-mode.has-bg .phase10-ref{
  background: rgba(15,23,42,.10);
  border-color: rgba(148,163,184,.45);
}
#scoreboardCard.phase10-mode #scoreboardTitle,
#scoreboardCard.phase10-mode #scoreboardEmpty,
#scoreboardCard.phase10-mode #historySummaryText,
#scoreboardCard.phase10-mode summary,
#scoreboardCard.phase10-mode th,
#scoreboardCard.phase10-mode td,
#scoreboardCard.phase10-mode .history-round-card,
#scoreboardCard.phase10-mode .history-round-card-name,
#scoreboardCard.phase10-mode .history-round-card-head,
#scoreboardCard.phase10-mode td .name,
#scoreboardCard.phase10-mode td .sub,
#scoreboardCard.phase10-mode .phase10-ref,
#scoreboardCard.phase10-mode .phase10-ref h3,
#scoreboardCard.phase10-mode .phase10-ref ol,
#scoreboardCard.phase10-mode .phase10-ref li,
#scoreboardCard.phase10-mode .phase10-ref strong,
#scoreboardCard.phase10-mode .history-graph-legend-item,
#scoreboardCard.phase10-mode .history-graph-label,
#scoreboardCard.phase10-mode .history-stats-table th,
#scoreboardCard.phase10-mode .history-stats-table td{
  color: #f8fafc !important;
}
#scoreboardCard.phase10-mode .history-stats-wrap{
  border-color: rgba(148,163,184,.45);
}
#scoreboardCard.phase10-mode .history-stats-table th{
  background: rgba(15,23,42,.75);
  border-bottom-color: rgba(148,163,184,.45);
}
#scoreboardCard.phase10-mode .history-stats-table td{
  background: rgba(15,23,42,.08);
  border-bottom-color: rgba(148,163,184,.45);
}
#scoreboardCard.phase10-mode .history-table td{
  background: rgba(15,23,42,.08);
  border-bottom-color: rgba(148,163,184,.45);
}
#scoreboardCard.phase10-mode .history-action-btn{
  background: rgba(15,23,42,.38);
  color: #f8fafc;
  border-color: rgba(148,163,184,.55);
}
#scoreboardCard.phase10-mode .history-action-btn.danger{
  color: #fecaca;
  border-color: rgba(248,113,113,.6);
}
#scoreboardCard.phase10-mode .history-edit-input{
  background: rgba(15,23,42,.45);
  color: #f8fafc;
  border-color: rgba(148,163,184,.55);
}
.history-table tr:last-child td{ border-bottom:none; }
.history-table td.history-score-went-out{
  background: rgba(79,70,229,.16);
  box-shadow: inset 0 0 0 1px rgba(79,70,229,.34);
}
.history-table td.history-score-doubled{
  background: rgba(249,115,22,.18);
  box-shadow: inset 0 0 0 1px rgba(194,65,12,.35);
}
.history-table td.history-score-went-out.history-score-doubled{
  background: linear-gradient(135deg, rgba(79,70,229,.17), rgba(249,115,22,.2));
  box-shadow: inset 0 0 0 1px rgba(107,58,168,.4);
}
.history-table td.history-score-phase10-complete{
  background: rgba(5,150,105,.16);
  box-shadow: inset 0 0 0 1px rgba(5,150,105,.34);
}
.history-table td.history-score-hearts-moon{
  background: rgba(234,179,8,.2);
  box-shadow: inset 0 0 0 1px rgba(202,138,4,.42);
}
.history-table td.history-score-hearts-moon-plus{
  background: rgba(37,99,235,.14);
  box-shadow: inset 0 0 0 1px rgba(37,99,235,.3);
}
.history-table .history-score-value{
  font-weight: 700;
}
.history-score-badge{
  display: inline-block;
  margin-left: 6px;
  padding: 1px 6px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 800;
  letter-spacing: .03em;
  line-height: 1.4;
  vertical-align: middle;
}
#scoreboardCard.hearts-mode .history-table .history-score-badge{
  opacity: 1;
  box-shadow: 0 0 0 1px rgba(254,202,202,.35);
}
#scoreboardCard.hearts-mode .history-card-score .history-score-badge{
  opacity: 1;
  box-shadow: 0 0 0 1px rgba(254,202,202,.35);
}
#scoreboardCard.hearts-mode .history-table td.history-score-hearts-moon{
  background: rgba(190,24,93,.28);
  box-shadow: inset 0 0 0 1px rgba(244,114,182,.45);
}
#scoreboardCard.hearts-mode .history-card-score.history-score-hearts-moon{
  background: rgba(190,24,93,.28);
  box-shadow: inset 0 0 0 1px rgba(244,114,182,.45);
}
#scoreboardCard.hearts-mode .history-table td.history-score-hearts-moon-plus{
  background: rgba(220,38,38,.18);
  box-shadow: inset 0 0 0 1px rgba(248,113,113,.42);
}
#scoreboardCard.hearts-mode .history-card-score.history-score-hearts-moon-plus{
  background: rgba(220,38,38,.18);
  box-shadow: inset 0 0 0 1px rgba(248,113,113,.42);
}
#scoreboardCard.hearts-mode .history-table .history-score-badge.hearts-moon{
  color: #fef2f2;
  background: linear-gradient(135deg, rgba(225,29,72,.92), rgba(190,24,93,.92));
  border: 1px solid rgba(254,202,202,.8);
  font-size: 11px;
  font-weight: 900;
  letter-spacing: .02em;
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}
#scoreboardCard.hearts-mode .history-table .history-score-badge.hearts-plus{
  color: #7f1d1d;
  background: rgba(254,242,242,.92);
  border: 1px solid rgba(254,202,202,.88);
  font-weight: 900;
}
#scoreboardCard.phase10-mode .history-table .history-score-badge{
  opacity: 1;
  box-shadow: 0 0 0 1px rgba(255,255,255,.35);
}
#scoreboardCard.phase10-mode .history-card-score .history-score-badge{
  opacity: 1;
  box-shadow: 0 0 0 1px rgba(255,255,255,.35);
}
#scoreboardCard.phase10-mode .history-table .history-score-badge.phase10{
  color: #f8fafc;
  background: linear-gradient(
    135deg,
    rgba(37,99,235,.9),
    rgba(138,58,249,.9)
  );
  border: 1px solid rgba(191,219,254,.8);
  font-size: 11px;
  font-weight: 900;
  letter-spacing: .02em;
  text-shadow: 0 1px 0 rgba(0,0,0,.28);
}
.history-table .history-score-badge.out{
  color: #312e81;
  background: rgba(79,70,229,.2);
  border: 1px solid rgba(79,70,229,.45);
}
.history-table .history-score-badge.doubled{
  color: #7c2d12;
  background: rgba(249,115,22,.2);
  border: 1px solid rgba(194,65,12,.45);
}
.history-table .history-score-badge.phase10{
  color: #064e3b;
  background: rgba(5,150,105,.2);
  border: 1px solid rgba(5,150,105,.45);
}
.history-table .history-score-badge.hearts-moon{
  color: #713f12;
  background: rgba(234,179,8,.28);
  border: 1px solid rgba(202,138,4,.5);
}
.history-table .history-score-badge.hearts-plus{
  color: #1e3a8a;
  background: rgba(37,99,235,.18);
  border: 1px solid rgba(37,99,235,.4);
}
.history-card-score.history-score-went-out{
  background: rgba(79,70,229,.16);
  box-shadow: inset 0 0 0 1px rgba(79,70,229,.34);
}
.history-card-score.history-score-doubled{
  background: rgba(249,115,22,.18);
  box-shadow: inset 0 0 0 1px rgba(194,65,12,.35);
}
.history-card-score.history-score-went-out.history-score-doubled{
  background: linear-gradient(135deg, rgba(79,70,229,.17), rgba(249,115,22,.2));
  box-shadow: inset 0 0 0 1px rgba(107,58,168,.4);
}
.history-card-score.history-score-phase10-complete{
  background: rgba(5,150,105,.16);
  box-shadow: inset 0 0 0 1px rgba(5,150,105,.34);
}
.history-card-score.history-score-hearts-moon{
  background: rgba(234,179,8,.2);
  box-shadow: inset 0 0 0 1px rgba(202,138,4,.42);
}
.history-card-score.history-score-hearts-moon-plus{
  background: rgba(37,99,235,.14);
  box-shadow: inset 0 0 0 1px rgba(37,99,235,.3);
}
.history-actions{
  display: flex;
  gap: 6px;
  justify-content: flex-end;
}
.history-action-btn{
  border: 1px solid var(--line);
  background: #fff;
  color: var(--text);
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 12px;
  cursor: pointer;
}
.history-action-btn:hover{
  border-color: rgba(37,99,235,.35);
}
.history-action-btn.danger{
  color: var(--bad);
  border-color: rgba(220,38,38,.35);
}
.history-edit-input{
  width: 86px;
  padding: 6px 8px;
  border: 1px solid var(--line);
  border-radius: 10px;
  font-size: var(--fs-sm);
}

.msg{
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(180,83,9,.25);
  background: rgba(180,83,9,.08);
  color: #7c2d12;
  font-size: var(--fs-sm);
  display:none;
}
.msg.show{ display:block; }

.sr-only{
  position:absolute;
  width:1px; height:1px;
  padding:0; margin:-1px;
  overflow:hidden;
  clip: rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}

/* Team chips */
.chips{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top: 8px;
}
.chip{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background:#fff;
  font-size: var(--fs-sm);
  color: var(--muted);
}
.chip strong{ color: var(--text); }

.round-preview{
  --skyjo-score-col: 208px;
  --skyjo-out-col: 28px;
  margin-top: 12px;
  padding: 10px;
  border: 1px solid var(--line);
  border-radius: 12px;
  background: rgba(255,255,255,.7);
}
.round-preview-grid{
  margin-top: 8px;
  display: grid;
  gap: 8px;
}
.round-preview-cols{
  display: grid;
  grid-template-columns: minmax(96px, 1fr) auto;
  align-items: center;
  gap: 10px;
  padding: 0 10px;
  color: var(--muted);
  font-size: var(--fs-sm);
  font-weight: 700;
}
.round-preview-cols span:last-child{
  text-align: right;
}
.round-preview-cols.skyjo{
  grid-template-columns: minmax(72px, 1fr) minmax(0, var(--skyjo-score-col)) var(--skyjo-out-col);
}
.round-preview-cols.skyjo span:nth-child(2){
  justify-self: center;
  text-align: center;
  transform: translateX(-5px);
}
.round-preview-cols.skyjo span:nth-child(3){
  justify-self: center;
  text-align: center;
}
.round-preview-item{
  display: grid;
  grid-template-columns: minmax(96px, 1fr) auto;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border: 1px solid var(--line);
  border-radius: 10px;
  background: rgba(255,255,255,.82);
  overflow: hidden;
  width: 100%;
  min-width: 0;
}
.round-preview-item.skyjo{
  grid-template-columns: minmax(72px, 1fr) minmax(0, var(--skyjo-score-col)) var(--skyjo-out-col);
}
.round-preview-name{
  font-weight: 650;
  color: var(--text);
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.round-preview-right{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;
}
.round-preview-item.skyjo .round-preview-right{
  display: flex;
  width: 100%;
  min-width: 0;
  justify-content: center;
}
.round-preview-value{
  min-width: 28px;
  text-align: center;
  font-weight: 800;
  flex: 0 0 28px;
}
.round-preview-value:empty{
  display: none;
}
.round-preview-input{
  width: 58px;
  min-width: 58px;
  flex: 0 0 58px;
  padding: 6px 8px;
  border: 1px solid var(--line);
  border-radius: 10px;
  text-align: center;
  font-weight: 700;
  appearance: textfield;
  -moz-appearance: textfield;
}
.round-preview-input::-webkit-outer-spin-button,
.round-preview-input::-webkit-inner-spin-button{
  -webkit-appearance: none;
  margin: 0;
}
.round-preview-actions{
  display: inline-flex;
  gap: 6px;
  flex-wrap: nowrap;
}
.round-preview-out{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: 0;
  color: var(--muted);
  font-size: 12px;
  user-select: none;
}
.round-preview-out input[type="radio"]{
  width: 14px;
  height: 14px;
  margin: 0;
}
.round-preview-btn{
  border: 1px solid var(--line);
  background: #fff;
  color: var(--text);
  border-radius: 999px;
  padding: 2px 9px;
  font-size: 12px;
  cursor: pointer;
  min-width: 30px;
  text-align: center;
  flex: 0 0 auto;
}
.round-preview-btn.active{
  background: rgba(37,99,235,.12);
  border-color: rgba(37,99,235,.45);
}

.round-helper-bar{
  margin-top: 10px;
  padding: 10px;
  border: 1px solid var(--line);
  border-radius: 12px;
  background: rgba(255,255,255,.65);
}
.round-helper-buttons{
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.round-helper-form{
  margin-top: 10px;
  padding-top: 8px;
  border-top: 1px solid var(--line);
}
.round-helper-form-row{
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}
.round-helper-input{
  min-width: 140px;
  max-width: 220px;
  padding: 7px 9px;
  border: 1px solid var(--line);
  border-radius: 10px;
  font-size: var(--fs-sm);
  background: #fff;
  color: var(--text);
}
.round-helper-btn{
  border: 1px solid var(--line);
  background: #fff;
  color: var(--text);
  border-radius: 999px;
  padding: 5px 11px;
  font-size: 12px;
  cursor: pointer;
}
.round-helper-btn:hover{
  border-color: rgba(37,99,235,.35);
}
.round-helper-btn.primary{
  background: linear-gradient(180deg, rgba(37,99,235,.98), rgba(37,99,235,.88));
  border-color: rgba(37,99,235,.9);
  color: #fff;
}
/* Phase 10: 0/1 entry fields stay readable */
input[placeholder="0 or 1"]{
  text-align: center;
}
/* Phase 10 hints / reference */
.phase-hints{
  margin-top: 14px;
  border: 1px solid var(--line);
  border-radius: var(--radius);
  background: var(--card);
  box-shadow: var(--shadow);
  padding: 14px 14px 12px;
}
.phase-hints__head{
  display:flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}
.phase-hints__title{
  font-size: var(--font-lg);
  font-weight: 700;
}
.phase-hints__sub{
  font-size: var(--font-sm);
  color: var(--muted);
  white-space: nowrap;
}
.phase-hints__list{
  margin: 0;
  padding-left: 20px;
  display: grid;
  gap: 6px;
}
.phase-hints__list li{
  line-height: 1.25;
}
.phase-hints__list li.current{
  outline: 2px solid var(--accent-2);
  outline-offset: 4px;
  border-radius: 10px;
  padding: 2px 4px;
}
.phase-hints__defs{
  margin-top: 10px;
  font-size: var(--font-sm);
}

/* Phase 10 helpers */
td .sub{
  margin-top: 2px;
  font-size: var(--fs-sm);
  color: var(--muted);
}

.phase10-ref{
  margin-top: 14px;
  padding: 14px 16px;
  border: 1px solid var(--line);
  border-radius: 16px;
  background: #fff;
}
.phase10-ref h3{
  margin: 0 0 8px;
  font-size: var(--fs-lg);
}
.phase10-ref ol{
  margin: 0;
  padding-left: 18px;
  color: var(--text);
}
.phase10-ref li{
  margin: 6px 0;
  color: var(--text);
}
.phase10-ref strong{ color: var(--text); }

@media print{
  @page{
    size: auto;
    margin: 12mm;
  }

  body{
    background: #fff !important;
    color: #000 !important;
  }

  .wrap{
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  header{
    margin: 0 0 10px !important;
  }

  .top-actions,
  #leftCard,
  #btnToggleSort,
  .title .sub,
  .banner .actions,
  .history-actions,
  .round-helper-bar,
  .muted,
  .msg,
  #ariaLive{
    display: none !important;
  }

  .grid{
    display: block !important;
  }

  #scoreboardCard{
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    overflow: visible !important;
  }

  #scoreboardCard .scoreboard-bg-image{
    display: none !important;
  }

  #scoreboardCard.has-bg table,
  #scoreboardCard.has-bg th,
  #scoreboardCard.has-bg details,
  #scoreboardCard.has-bg .history-wrap,
  #scoreboardCard.has-bg .history-graph-wrap,
  #scoreboardCard.has-bg .phase10-ref{
    background: #fff !important;
  }

  details#historyDetails{
    display: block !important;
  }

  details#historyDetails > summary{
    display: none !important;
  }

  .history-wrap{
    overflow: visible !important;
    border: 1px solid #cbd5e1 !important;
  }
  .history-cards{
    display: none !important;
  }

  .history-table{
    min-width: 0 !important;
  }

  th, td{
    color: #000 !important;
  }
}
