<!-- ScoreKeeper.html -->
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Card Game Score Keeper</title>
  <link rel="stylesheet" href="./SK.css?v=2026-02-10-1" />
  <script type="module" src="./SK.js?v=2026-02-10-1"></script>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1 class="brand-title">
          <img src="./img/SK.png" alt="" class="brand-icon" aria-hidden="true" />
          <span>ScoreKeeper</span>
        </h1>
        <div class="sub">
          <strong>Set up your game in seconds.</strong><br />
          Enter players, names, target points, and click
          <strong>Start Game</strong>.
        </div>
      </div>
      <div class="top-actions">
        <button class="btn danger" id="btnNewGame" type="button" title="Start over">
          New Game
        </button>
        <button class="btn" id="btnNewSame" type="button" title="Start a new game with the same players">
          New Game (same players)
        </button>
        <span class="pill" id="pillStatus"><strong>Status:</strong> Setup</span>
        <span class="pill" id="pillSaved" style="display: none"><strong>Saved:</strong> Yes</span>
      </div>
    </header>

    <div class="banner" id="winnerBanner" role="status" aria-live="polite">
      <div class="big" id="winnerText">Winner:</div>
      <div class="small" id="winnerSub">Target reached.</div>
      <div class="actions">
        <button class="btn primary" id="btnNewGame2" type="button">
          New Game
        </button>
        <button class="btn" id="btnNewSame2" type="button" title="Start a new game with the same players">
          New Game (same players)
        </button>
        <button class="btn" id="btnKeepGoing" type="button">
          Keep tracking
        </button>
      </div>
    </div>

    <div class="grid">
      <section class="card" id="leftCard">
        <h2 id="leftTitle">Game Setup</h2>

        <div id="setupPanel">
          <div class="row">
            <div class="field" style="max-width: 260px">
              <label for="presetSelect">Game preset</label>
              <select id="presetSelect">
                <option value="custom">Custom</option>
                <option value="uno">Uno</option>
                <option value="phase10">Phase 10</option>
                <option value="crazy8s">Crazy 8s</option>
                <option value="skyjo">SkyJo</option>
                <option value="hearts">Hearts</option>
                <option value="spades">Spades</option>
              </select>
            </div>

            <div class="field" style="max-width: 200px">
              <label for="playerCount">Number of players</label>
              <input
                id="playerCount"
                type="text"
                inputmode="numeric"
                pattern="[0-9]*"
                enterkeyhint="done"
                autocomplete="off"
                min="2"
                max="12"
                value="4"
              />
            </div>

            <div class="field" style="max-width: 220px">
              <label id="targetLabel" for="targetPoints">Target</label>
              <input
                id="targetPoints"
                type="text"
                inputmode="numeric"
                pattern="[0-9]*"
                enterkeyhint="done"
                autocomplete="off"
                min="1"
                value="100"
              />
            </div>
          </div>

          <div class="muted" style="margin-top: 8px">
            Win mode: <strong id="winModeText">Highest score wins</strong>
          </div>

          <div class="hr"></div>

          <div id="playerNamesWrap" class="row" aria-label="Player names"></div>

          <div class="hr"></div>

          <!-- Team preview (Spades only) -->
          <div id="teamPreview" style="display: none">
            <div class="muted">Teams (Spades):</div>

            <!-- Team picker -->
            <div class="row" style="margin-top: 8px" id="teamPickerRow">
              <div class="field" style="max-width: 320px">
                <label id="spadesPartnerLabel" for="spadesPartner">Partner for Player 1</label>
                <select id="spadesPartner" disabled></select>
              </div>
            </div>

            <div class="chips" id="teamChips"></div>

            <div class="muted" style="margin-top: 6px">
              Tip: Pick Player 1’s partner, and we’ll auto-form the other
              team.
            </div>
            <div class="hr"></div>
          </div>

          <div class="row">
            <button class="btn primary" id="btnStart" type="button" disabled>
              Start Game
            </button>
            <button class="btn" id="btnLoadSaved" type="button" style="display: none">
              Load Saved Game
            </button>
          </div>

          <div class="msg" id="setupMsg"></div>
          <div class="muted" style="margin-top: 10px">
            Notes: Names must be unique. Scores default to 0 if left blank.
            Negative scores are allowed.
          </div>
        </div>

        <div id="roundPanel" style="display: none">
          <div class="row" style="justify-content: space-between">
            <div class="pill">
              <strong>Target:</strong> <span id="targetPill">0</span>
            </div>
            <div class="pill">
              <strong>Round:</strong> <span id="roundPill">1</span>
            </div>
          </div>

          <div class="hr"></div>

          <div id="roundPreview" class="round-preview" aria-label="Current round preview">
            <div class="muted"><strong>Round Entry</strong></div>
            <div id="roundPreviewBody" class="round-preview-grid"></div>
          </div>

          <div id="roundHelperBar" class="round-helper-bar" style="display: none" aria-label="Round helpers">
            <div class="muted"><strong>Quick Actions</strong></div>
            <div id="roundHelperButtons" class="round-helper-buttons"></div>
            <div id="roundHelperForm" class="round-helper-form" style="display: none"></div>
          </div>

          <div class="hr"></div>

          <div class="row">
            <button class="btn primary" id="btnAddRound" type="button">
              Add Round
            </button>
            <button class="btn" id="btnUndo" type="button" disabled>
              Undo Last Round
            </button>
          </div>

          <div class="msg" id="roundMsg"></div>
        </div>
      </section>

      <section class="card" id="scoreboardCard">
        <img
          id="scoreboardBgImage"
          class="scoreboard-bg-image"
          src=""
          alt=""
          hidden
          aria-hidden="true"
        />
        <div class="scoreboard-head">
          <h2 id="scoreboardTitle" style="margin: 0">Scoreboard</h2>
          <div class="row" style="justify-content: flex-end">
            <button class="btn" id="btnToggleSort" type="button" disabled title="Toggle sorting by score">
              Sort: Off
            </button>
          </div>
        </div>

        <div id="scoreboardEmpty" class="muted">
          Set up a game to see the scoreboard.
        </div>

        <div id="scoreboardArea" style="display: none">
          <table aria-label="Running totals">
            <thead>
              <tr>
                <th style="width: 48%" id="colHeadEntity">Player</th>
                <th id="colHeadTotal" style="width: 26%">Total</th>
                <th id="colHeadThis" style="width: 26%">This round</th>
              </tr>
            </thead>
            <tbody id="scoreboardBody"></tbody>
          </table>

          <section id="phase10Ref" class="phase10-ref" aria-label="Phase 10 reference" hidden>
            <h3>Phase 10 Reference</h3>
            <ol>
              <li><strong>Phase 1:</strong> 2 sets of 3</li>
              <li><strong>Phase 2:</strong> 1 set of 3 + 1 run of 4</li>
              <li><strong>Phase 3:</strong> 1 set of 4 + 1 run of 4</li>
              <li><strong>Phase 4:</strong> 1 run of 7</li>
              <li><strong>Phase 5:</strong> 1 run of 8</li>
              <li><strong>Phase 6:</strong> 1 run of 9</li>
              <li><strong>Phase 7:</strong> 2 sets of 4</li>
              <li><strong>Phase 8:</strong> 7 cards of one color</li>
              <li><strong>Phase 9:</strong> 1 set of 5 + 1 set of 2</li>
              <li><strong>Phase 10:</strong> 1 set of 5 + 1 run of 3</li>
            </ol>
          </section>

          <div style="margin-top: 12px">
            <details id="historyDetails">
              <summary>
                <span id="historySummaryText">Round History</span>
              </summary>
              <div class="history-wrap" style="margin-top: 10px">
                <table class="history-table" aria-label="Round history" id="historyTable"></table>
              </div>
            </details>
          </div>

          <div class="muted" style="margin-top: 10px">
            Tip: Press Enter in the last score field to add the round.
          </div>
        </div>
      </section>
    </div>

    <p class="sr-only" id="ariaLive" aria-live="polite"></p>
  </div>
</body>

</html>
