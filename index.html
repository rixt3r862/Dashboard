<file name=ScoreKeeper/SK.js><!DOCTYPE html>
<script>
  // ... other code ...

  const PRESETS = {
    // ... other presets ...
    phase10: {
      label: "Phase 10",
      target: 10,
      winMode: "high",
      teams: false,
      notes: "Track phases completed. Enter 1 when a player completes a phase this round, otherwise 0. First to 10 phases wins.",
    },
    // ... possibly other presets ...
  };

  // ... other code ...

  function currentNameInputs() {
    // existing function code
  }

  function isPhase10() {
    return state.presetKey === "phase10";
  }

  function isSpades() {
    return state.presetKey === "spades";
  }

  function updateWinModeText() {
    if (isPhase10()) {
      els.winModeText.textContent = "Most phases wins";
      return;
    }
    els.winModeText.textContent = state.winMode === "low" ? "Lowest score wins" : "Highest score wins";
  }

  function updateScoreColumnLabels() {
    // These IDs are added in app.html below
    const totalTh = document.getElementById("colHeadTotal");
    const thisTh = document.getElementById("colHeadThis");
    if (!totalTh || !thisTh) return;

    if (isPhase10()) {
      totalTh.textContent = "Phases";
      thisTh.textContent = "This round";
    } else {
      totalTh.textContent = "Total";
      thisTh.textContent = "This round";
    }
  }

  function applyPreset(key) {
    state.presetKey = key;
    const preset = PRESETS[key];
    state.winMode = preset.winMode;
    updateWinModeText();
    updateScoreColumnLabels();
    // ... other code ...
  }

  function newGame() {
    // ... existing code ...
    updateWinModeText();
    updateScoreColumnLabels();
    // ... other code ...
  }

  function loadSaved() {
    // ... existing code ...
    updateWinModeText();
    updateScoreColumnLabels();
    // ... other code ...
  }

  function startGame() {
    // ... existing code ...
    updateWinModeText();
    updateScoreColumnLabels();
    save();
    // ... other code ...
  }

  function renderRoundInputs() {
    // ... existing code ...
    for (const p of state.players) {
      const label = document.createElement("label");
      label.textContent = isPhase10() ? `${p.name} (phase this round: 0 or 1)` : `${p.name} (this round)`;
      // ... existing code ...
      const input = document.createElement("input");
      input.type = "number";
      input.inputMode = "numeric";
      // ... existing code ...
      input.step = "1";
      input.value = "0";
      if (isPhase10()) {
        input.min = "0";
        input.max = "1";
        input.placeholder = "0/1";
      }
      // ... existing code ...
    }
    // ... existing code ...
  }

  function addRound() {
    // ... existing code ...
    for (const p of state.players) {
      const v = scores[p.id];
      if (!Number.isInteger(v)) {
        showMsg(els.roundMsg, "Scores must be whole numbers.");
        return;
      }
      if (isPhase10() && v !== 0 && v !== 1) {
        showMsg(els.roundMsg, "Phase 10: enter 0 or 1 for each player.");
        return;
      }
    }
    // ... existing code ...
  }

  // Boot section
  // ... existing boot code ...
  updateWinModeText();
  updateScoreColumnLabels();
  renderSetupInputs();
  // ... existing boot code ...
</script>
</file>

<file name=ScoreKeeper/app.html><!DOCTYPE html>
<html lang="en">
<head>
  <!-- ... other head content ... -->
</head>
<body>
  <!-- ... other body content ... -->
  <table>
    <thead>
      <tr>
        <th style="width: 48%" id="colHeadEntity">Player</th>
        <th style="width: 26%" id="colHeadTotal">Total</th>
        <th style="width: 26%" id="colHeadThis">This round</th>
      </tr>
    </thead>
    <!-- ... rest of the table ... -->
  </table>
  <!-- ... other body content ... -->
</body>
</html>
</file>
